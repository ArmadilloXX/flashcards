language: ruby
rvm: 2.2.3
env:
  global:
  - RAILS_ENV=test
  - secure: b2HxaGCHSIm9d3D1H6PapjU2XWNHINLMeDdkHWhUINHutqL9WS2KA77DP6qziQhNuTaeCaGvLW4BcO2U5IeD+zAgBF+LxhVtMc/9PQKdUdDJ8oSNrZ8c9P/5iNREC/FEy/962BHJn8hhyVPi4I8DqUoe/zX6FrJ6byLKuOLWeN8rJY7kOZH/FJjDWmpTCb/hpom/ye1+OK/3beGelPTHfJw9bOfh7rQQWJ1uhVfM+WGERZdIJmVlXPinTQTEFpt/FUaei1nmK7m9HkRyHs4DYqtIGTuTTeZ9VpzctiZ/LDB2d+lOqMBpbdl/l3PXtsTBdQgSVJR2jVhYcgaF2dYVQtNPx50e+6Ub/LhS55LkVFCZ5++9N8XQ7tggGXaqWVwlt7VLeg+zUsb7YDs7qn3/uqy22b3qAlLOfmsMmtV+JuRPfvpOgxvQtAWfJOV0+kSVgkO6SNKQrUHD53aj1vsFn5W2udGVk0optFnN7/B9+xwEV+T3LK2WCF5TafByWAxCNDoTwtIDzsaoe9XHGBKF3pxoLrRw2KIXjVixW2CkVmryZWbGP69kRSiDvUs/pzcDk4LDDTBQ0l4SqWPjcjI+6afZSZCBl3H8a0Zt6+KKVlMBc1Bak+v1PhG64mLIUIp+Pz+yRMMeRbTCPRkKFXpeIJuksjnpTLpBZuWY/3HlSZM=
  - secure: EAbJdkGrC/rxw9/EiL+NhK9vAYoiJSRTiRhzcnw7Uf+/cwqGmfOxNbTbSZq/210tJJWHvsqx7kt62Us3oIWMcs6e/SiA5ib5GhDd8Z9mx81yOz5Qn68c6ltuxHJ28UBUKaZqQcLtSfe0WNL//QnQpx42rYFLZH9XYfYblHHNvVdkfB9JfBYeb/R9rlnhFp0qZWmNcYJIbwVc5Dojec/IhOfT05AuGsPlZ1oTjTpUbD6C3d8W4i5260XrEDwLgy/3NgNLQMLOW2+JMtGUdhk7egy0zig2TT4XvtSh5KY+KmtXz/91PIL0DgpHwBp7L8PKLnugDkO+qFn3T2XyI7+9ACw4AkK3+CZ64lytTxPGm0Jt6Ho72/f2KyOrl2NcY/xyYHW3UwhNUSnChVstwQHhcphPAHEpEC8RGtYxx6NyuTYpOhkZFKqz02NxyE6M/otFUyQXeNG7Qd9RuNZLoHIIUF3Q/KDOatjPOLijToLtWhWZwr61597854w0p8F92UJNGATr7nE9619pGteWfQoP2rwj+QXE82GXb1Iq58WM9ksnb/+BO63ZuDsi3nu+5f2oSYhDB+FQW03tQ74MBcQ/2j6toQpr9QJ1HDxwyjPHql/0cRfNpfi8EbnILumJs2Blnz1h1yn9q1faNz1oVMJHHms8csZ4MCU8P/DLrSjfq68=
  - secure: BAFm6CSMWmNdp4qWCR9eX1ZTjHdGYSIe0/aWIHeDFjMUgXDUDnACOvSL+GUNjXpNWeROMZE4ZCHXxCawCpYFM695JOPluVG01VSSXZZ4D34F0+96d0+AGj1lzK0WFNlKQoSHrnkXcOsCJrSMyPJaOUNGdMVXhkj5FZ2pjYcQ7ILI42I1y65HnhcLKPNd0IX+FOy7fcKQI0vbkywHFFCF4VsGqcUksOKxbDndDn1Qm9dlf9tKxOVy7cAlRCYttzlqiwB+rYbGfLTcIpbBIc6B+16jYYtYQJn+UmvJ1WP0mc6/XRx7Uu0N9vAnkkrqwVxR393z+mZhtameTkf9esOzxZcXM0G7J6CU+/VjCOcn7zAs9j5UGjiVUaX7YDKr1gYlR0k7rIRBwW1gUOenjF2QplPFFy+T52oE5FNd2wE55c+ii301MXt+t6mbRLQFzHHAciv9cKF9l6X8VvGqg+KQGGPUUBI7KKjJfFxxSb1evgWl5zNJ/Zs1HGsqLri358xUI8F7f3LlQBeMm0wiL4wer11ARECMWiE/NJq6oX9eD9TOHwsac0vSWUFUV/bZT0WBIS5I0yO6F2ouJffdF6+4sctufFvYXIiRj7MtDNUsdi+UAh06FXFCheyGg2EolejP9ywm4LdWtQ7a2vYH8DjFzxC4+OMF4XPEwXloeV0No/E=
  - secure: pheNi/WRYzzDeVROeyVCfBRBKacvX2Duud8jVkTBYSlmuv3vrWACfY/Sx8Tl6cEBBUW6DuGMztru24KhR5B2pKMKO6XvF5VqmiBps+f8hh4aH+40VlCjk4z+Yt+FtycP7OVRgAuFAIjvjHeQL242wpEM5z5BZdPSzWxTSvTcXsD+boz1tLumg7DN7IZJpZrmuPQxZFgYUC9C/bt7tNxhK59Cfz16eQjy7hqYn19RGH84ez2/i8cssLFNqo5r7ELQsQR+UyFhD+/iHAO7V6yHX5mlAWm+LrR/+LShE5LHPgm/yCYGI6ee+ZZPA1pt+yEMl729GADFtwtADbLQlWS/+VkiVZRLxnTxJXaLLMU/asLAcM3p02NL8hYjhCdqqUUnhnW6uQWxyaLedc5vnxzZaiWpeH+NC2SR+wJSghFt+hjgG1S9jI+CWkFzpggQyHENRbTFiffeGK3CA7brGy/QZxG4GoSFXoO7rO/aVzuieP1eZ365l4JN5qRdl+XhXGeAKfJ6o0lwGhAqS/SoemRrVEu/j49ZXDjnvGLKHBSewBMdaUhcYA4qu1nBnIH3KKVeQrbiDIZ6eS8ZouqAqhWchdVrZnrfJ/9GxKAlqnf5XItaVyVB3l9VeKihL9bfm4XxQqbA6yqEovMDt3An1f6WnCmzdrmFaoXMb00RTOjrphI=
  - secure: tVzYMUmFp57n0O7uS7+Pb6jQB6fxPlsz8T9eBSF4XBKOFpVny/st5Aa44DqAD6vuVj9IFQ+6jjwt/jzOrwRNqFpaMmgSidChg20zK7Su4r1MrpMnE06jZxWnuq+XAi1Ef1fjxs8k34ZRUzt3Y9YkDKAVo50m4HTbQNBqxKUuegoeeGjD6TWMFCGOwVTjTVaD+xP5gM1kqUlfrkFIwfWiYl44qFx0IU2a64638jI0AaMgLjl1Dst8pDfWrTEwqHht7tTjMjtZ8nxIlGjI2fuLGEyZLrStAKHsctOHtS0vRyI43fN/VUppL5JjVtiw7tOkhSlGfifX+9jDZAvbkd6ZLhu3zSy7Tdlg/0f6R0clrq8J8F7v5R1EkPCb3bLkWjXJImSOXF8aJ7EX/lOzcqFuTfw1FchaOZm4gaGka8SIb8tbqqtSKhAZQHzFJWdmRPWO0Ss6DsC0eQiiGiulrXuaVOts05XkzksdZgA2nTFCwEtc63s4sZ8SElwCD+dPtttbx2Tnnhs2ZmiqJU7XQ96HSivcwWLWlrEfVEZRuvF59VjqUDKnde1FCm5M3KJchRv6naew7emXLGqF97fisJC3C0jhbTyz/mFDwgwVhAiuyE61WNbH4uxvrwLlYb2vnb34u9VhgQ0JkvsvTLSnXKTxnBiljz+BkC+cEaQBxoUyuvs=
script:
- bundle exec rspec
services:
  - redis-server
addons:
  postgresql: '9.4'
before_script:
- cp config/database.yml.travis config/database.yml
- psql -c 'create database travis_ci_test;' -U postgres
- bundle exec rake db:migrate
install: bundle install --jobs=3 --retry=3
